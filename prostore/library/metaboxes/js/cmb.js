/**
 * Controls the behaviours of custom metabox fields.
 *
 * @author Andrew Norcross
 * @author Jared Atchison
 * @author Bill Erickson
 * @see    https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress
 */
/*jslint browser: true, devel: true, indent: 4, maxerr: 50, sub: true */
/*global jQuery, tb_show, tb_remove */
/**
 * Custom jQuery for Custom Metaboxes and Fields
 */
jQuery(document).ready(function(c){var a;c(".cmb_timepicker").each(function(){c("#"+jQuery(this).attr("id")).timePicker({startTime:"07:00",endTime:"22:00",show24Hours:false,separator:":",step:30})});c(".cmb_datepicker").each(function(){c("#"+jQuery(this).attr("id")).datepicker()});c("#ui-datepicker-div").wrap('<div class="cmb_element" />');c("input:text.cmb_colorpicker").each(function(d){c(this).after('<div id="picker-'+d+'" style="z-index: 1000; background: #EEE; border: 1px solid #CCC; position: absolute; display: block;"></div>');c("#picker-"+d).hide().farbtastic(c(this))}).focus(function(){c(this).next().show()}).blur(function(){c(this).next().hide()});c(".cmb_upload_file").change(function(){a=c(this).attr("name");c("#"+a+"_id").val("")});c(".cmb_upload_button").live("click",function(){var d;a=c(this).prev("input").attr("name");d="Use as "+c("label[for="+a+"]").text();tb_show("","media-upload.php?post_id="+c("#post_ID").val()+"&type=file&cmb_force_send=true&cmb_send_label="+d+"&TB_iframe=true");return false});c(".cmb_remove_file_button").live("click",function(){a=c(this).attr("rel");c("input#"+a).val("");c("input#"+a+"_id").val("");c(this).parent().remove();return false});window.original_send_to_editor=window.send_to_editor;window.send_to_editor=function(j){var g,e,h,k,i,l,f,d=true;if(a){if(c(j).html(j).find("img").length>0){g=c(j).html(j).find("img").attr("src");e=c(j).html(j).find("img").attr("class");h=e.split(" ");k=h[h.length-1];k=k.replace("wp-image-","")}else{i=j.split("'");g=i[1];l=i[2];l=l.replace(">","");l=l.replace("</a>","");k=""}f=/(jpe?g|png|gif|ico)$/gi;if(g.match(f)){d='<div class="img_status"><img src="'+g+'" alt="" /><a href="#" class="cmb_remove_file_button" rel="'+a+'">Remove Image</a></div>'}else{j='<a href="'+g+'" target="_blank" rel="external">View File</a>';d='<div class="no_image"><span class="file_link">'+j+'</span>&nbsp;&nbsp;&nbsp;<a href="#" class="cmb_remove_file_button" rel="'+a+'">Remove</a></div>'}c("#"+a).val(g);c("#"+a+"_id").val(k);c("#"+a).siblings(".cmb_upload_status").slideDown().html(d);tb_remove()}else{window.original_send_to_editor(j)}a=""};jQuery(".tabs").tabs();var fmvp=jQuery("#featured_media_video_provider"),fmvi=jQuery("#featured_media_video_id"),fmt=jQuery("#featured_media_type");var fm_toggle=function(){if(fmt.val()=="video"){fmvp.parent().parent().show();fmvi.parent().parent().show()}else{fmvp.parent().parent().hide();fmvi.parent().parent().hide()}};fm_toggle();fmt.change(function(){fm_toggle()});var fmri=jQuery("#featured_media_revslider_id");var fmt_toggle=function(){if(fmt.val()=="revslider"){fmri.parent().parent().show()}else{fmri.parent().parent().hide()}};fmt_toggle();fmt.change(function(){fmt_toggle()});var fmsc=jQuery("#featured_media_slider_custom");var fmc_toggle=function(){jQuery("#featured_slider_image_ids").parent().parent().hide();if(fmt.val()=="flexslider"){if(jQuery("#featured_media_slider_custom:checked").val()!==undefined){jQuery("#featured_slider_image_ids").parent().parent().show()}else{jQuery("#featured_slider_image_ids").parent().parent().hide}}else{jQuery("#featured_slider_image_ids").parent().parent().hide()}};fmc_toggle();jQuery("#featured_media_slider_custom").click(function(){fmc_toggle()});var fms_toggle=function(){if(fmt.val()=="flexslider"){fmsc.parent().parent().show()}else{fmsc.parent().parent().hide()}};fms_toggle();fmt.change(function(){fms_toggle();fmc_toggle()});jQuery("#portfolio_tax").parent().parent().hide();jQuery("#portfolio_filter").parent().parent().show();jQuery("#portfolio_tax_specific").click(function(){jQuery("#portfolio_tax").parent().parent().fadeToggle(200);jQuery("#portfolio_filter").parent().parent().fadeToggle(200)});if(jQuery("#portfolio_tax_specific:checked").val()!==undefined){jQuery("#portfolio_tax").parent().parent().show();jQuery("#portfolio_filter").parent().parent().hide()}jQuery("#blog_tax").parent().parent().hide();jQuery("#blog_tax_specific").click(function(){jQuery("#blog_tax").parent().parent().fadeToggle(200)});if(jQuery("#blog_tax_specific:checked").val()!==undefined){jQuery("#blog_tax").parent().parent().show()}});