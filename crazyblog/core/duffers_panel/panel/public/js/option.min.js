!function(e){"use strict"; var t = e.fn.addClass; e.fn.addClass = function(){var e = t.apply(this, arguments); return"BODY" == this.prop("tagName") && "folded" == arguments[0] && calculatePositionAndSize(), e}; var a = e.fn.removeClass; e.fn.removeClass = function(){var e = a.apply(this, arguments); return"BODY" == this.prop("tagName") && "folded" == arguments[0] && calculatePositionAndSize(), e}; var r = e.browser.msie, s = 0; r && (s = jQuery.browser.version, s = parseFloat(s)), vp.custom_check_radio_event(".vp-wrap", ".vp-field.vp-checked-field .field .input label"), e(document).on("ready", function(){e.each(e(".vp-wrap .vp-field"), function(t, a){jQuery(this).parents(".tocopy").length <= 0 && vp.init_controls(e(this))})}); var n, i = [], o = [], l = [], p = []; e(".vp-menu-goto").each(function(t){var a = e(this).attr("href"), r = e(a), s = []; r.children(".vp-field").each(function(t){var a = e(this), r = a.attr("id"), i = a.attr("data-vp-validation"), d = a.attr("data-vp-bind"), c = a.attr("data-vp-items-bind"), u = a.getDatas().type; e('[name="' + r + '"]'); n = a.attr("data-vp-dependency"), n && p.push({dep:n, type:"field", source:a.attr("id")}), d && o.push({bind:d, type:u, source:r}), c && l.push({bind:c, type:u, source:r}), i && s.push({name:r, rules:i, type:u})}), r.children(".vp-section").each(function(t){var a = e(this); n = a.attr("data-vp-dependency"), n && p.push({dep:n, type:"section", source:a.attr("id")}), a.find(".vp-field").each(function(t){var a = e(this), r = a.attr("id"), i = a.attr("data-vp-validation"), d = a.attr("data-vp-bind"), c = a.attr("data-vp-items-bind"), u = a.getDatas().type; e('[name="' + r + '"]'); n = a.attr("data-vp-dependency"), n && p.push({dep:n, type:"field", source:a.attr("id")}), d && o.push({bind:d, type:u, source:r}), c && l.push({bind:c, type:u, source:r}), i && s.push({name:r, rules:i, type:u})})}), s.length > 0 && i.push({name:a.trimChar("#"), fields:s})}), e(".vp-js-menu-goto").click(function(t){t.preventDefault(), window.location.hash = "#_" + e(this).attr("href").substr(1); var a = e(this), r = a.parent("li"), s = r.parents("li"), n = r.siblings("li"), i = s.siblings("li"), o = e(a.attr("href")); n.removeClass("vp-current"), i.removeClass("vp-current"), s.addClass("vp-current"), r.addClass("vp-current"), o.siblings(".vp-panel").removeClass("vp-current"), o.addClass("vp-current")}); var d = window.location.hash; "" !== d?(d = "#" + d.substr(2), e('a[href="' + d + '"]').trigger("click")):e(".vp-current > .vp-js-menu-goto").click(), e(".vp-js-menu-dropdown").click(function(t){t.preventDefault(); var a = e(this), r = a.parent("li"), s = r.siblings("li"), n = a.next("ul"); r.hasClass("vp-current") || (s.removeClass("vp-current"), r.addClass("vp-current"), n.children("li.vp-current").exists()?n.children("li.vp-current").children("a").click():n.children("li").first().children("a").click())}); for (var c = 0; c < o.length; c++){var u = o[c], v = u.bind.split("|"), f = v[0], m = v[1], h = []; m = m.split(/[\s,]+/); for (var _ = 0; _ < m.length; _++)h.push(m[_]); for (var _ = 0; _ < h.length; _++)vp.binding_event(h, _, u, f, ".vp-wrap", "option")}for (var c = 0; c < l.length; c++){var u = l[c], v = u.bind.split("|"), f = v[0], m = v[1], h = []; m = m.split(/[\s,]+/); for (var _ = 0; _ < m.length; _++)h.push(m[_]); for (var _ = 0; _ < h.length; _++)vp.items_binding_event(h, _, u, f, ".vp-wrap", "option")}for (var c = 0; c < p.length; c++){var u = p[c], v = u.dep.split("|"), f = v[0], m = v[1], h = []; m = m.split(","); for (var _ = 0; _ < m.length; _++)h.push(m[_]); for (var _ = 0; _ < h.length; _++)vp.dependency_event(h, _, u, f, ".vp-wrap")}e(".vp-js-option-form").bind("submit", function(t){t.preventDefault(), vp.tinyMCE_save(), e(".vp-js-option-form .vp-field").removeClass("vp-error"), e(".validation-notif.vp-error").remove(), e(".validation-msg.vp-error").remove(); for (var a = 0, r = '<em class="validation-notif vp-error"></em>', s = 0; s < i.length; s++){var n = i[s]; if (n.nError = 0, n.nError = vp.fields_validation_loop(n.fields), n.nError > 0){var o = e(r), l = e('[href="#' + n.name + '"]'), p = l.parent("li").parent("ul"); o.appendTo(l), p.hasClass("vp-menu-level-2") && 0 === p.siblings("a").children(".validation-notif.vp-error").length && o.clone().appendTo(p.siblings("a"))}a += n.nError}if (!(a > 0)){var d = e(".vp-js-save-loader"), c = e(this).find(".vp-save"), u = e(".vp-js-save-status"), v = e("#vp-option-form"), f = v.serializeArray(), m = [], h = {}, _ = {}; e.each(f, function(e, t){h[t.name]?h[t.name] += 1:h[t.name] = 1}), e.each(f, function(e, t){_[t.name] || h[t.name] > 1?(_[t.name]?_[t.name] += 1:_[t.name] = 0, m.push({name:t.name + "_" + _[t.name], value:t.value})):m.push({name:t.name, value:t.value})}); var g = e.param(m), y = "action=vp_ajax_" + vp_opt.name + "_save&" + g + "&nonce=" + vp_opt.nonce; c.attr("disabled", "disabled"), d.stop(!0, !0).fadeIn(100), e.post(ajaxurl, y, function(e){u.html(e.message), e.status?u.addClass("success"):u.addClass("failed"), d.stop(!0, !0).fadeOut(100, function(){u.stop(!0, !0).fadeIn(100)}), setTimeout(function(){c.removeAttr("disabled"), u.stop(!0, !0).fadeOut(1e3, function(){u.removeClass("success").removeClass("failed")})}, 3e3)}, "JSON")}}), e(".vp-js-restore").bind("click", function(t){if (t.preventDefault(), confirm("The current options will be deleted, do you want to proceed?")){var a = e(this), r = a.parent(), s = r.find(".vp-js-status"), n = r.find(".vp-js-loader"), i = {action:"vp_ajax_" + vp_opt.name + "_restore", nonce:vp_opt.nonce}; a.attr("disabled", "disabled"), n.fadeIn(100), e.post(ajaxurl, i, function(e){switch (n.fadeOut(0), e.code){case parseInt(vp_opt.SAVE_SUCCESS):s.html(vp_opt.util_msg.restore_success); break; case parseInt(vp_opt.SAVE_NOCHANGES):s.html(vp_opt.util_msg.restore_nochanges); break; case parseInt(vp_opt.SAVE_FAILED):s.html(vp_opt.util_msg.restore_failed + ": " + e.message)}s.fadeIn(100), setTimeout(function(){s.fadeOut(1e3, function(){a.removeAttr("disabled"), s.fadeOut(500), e.code == parseInt(vp_opt.SAVE_SUCCESS) && location.reload()})}, 2e3)}, "JSON")}}), e("#vp-js-import").bind("click", function(t){t.preventDefault(); var a = e("#vp-js-import_text"), r = e("#vp-js-import-status"), s = e("#vp-js-import-loader"), n = e(this), i = {action:"vp_ajax_" + vp_opt.name + "_import_option", option:a.val(), nonce:vp_opt.nonce}; n.attr("disabled", "disabled"), s.fadeIn(100), e.post(ajaxurl, i, function(e){s.fadeOut(0), e.status?r.html(vp_opt.util_msg.import_success):r.html(vp_opt.util_msg.import_failed + ": " + e.message), r.fadeIn(100), setTimeout(function(){r.fadeOut(1e3, function(){n.removeAttr("disabled"), r.fadeOut(500), e.status && location.reload()})}, 2e3)}, "JSON")}), e("#vp-js-export").bind("click", function(t){t.preventDefault(); var a = e("#vp-js-export-status"), r = e("#vp-js-export-loader"), s = e(this), n = {action:"vp_ajax_" + vp_opt.name + "_export_option", nonce:vp_opt.nonce}; s.attr("disabled", "disabled"), r.fadeIn(100), e.post(ajaxurl, n, function(t){r.fadeOut(0), !e.isEmptyObject(t.option) && t.status?(e("#vp-js-export_text").val(t.option), a.html(vp_opt.util_msg.export_success)):a.html(vp_opt.util_msg.export_failed + ": " + t.message), a.fadeIn(100), setTimeout(function(){a.fadeOut(1e3, function(){s.removeAttr("disabled"), a.fadeOut(500)})}, 3e3)}, "JSON")})}(jQuery), jQuery(document).ready(function(e){e("#import-settings").on("click", function(){var t = jQuery("#import-type").val(); if (0 == t)return alert("Please select demo type to import data!"), !1; var a = confirm("Are you sure installing demo data?  Please be aware that the demo data comprises a significant amount of content, and we suggest this demo data be installed in a local host (ie home or work computer using wamp or mamp) not in the online site."); if (0 == a)return!1; if (jQuery(this).hasClass("is_disabled"))return!1; jQuery("#import-settings").addClass("is_disabled"); var r = e("#theme-url").val(), s = e('<img class="progress" src="' + r + '"/>').insertAfter("#import-type"); return e.ajax({url:ajaxurl, method:"POST", data:"action=theme-install-demo-data&file=" + t, success:function(e){jQuery(".importer_result .result").html("").hide(); jQuery("html").height(); jQuery(".overlay").css({background:"rgba(0,0,0,0.65)", position:"fixed", top:"0", left:"0", width:"100%", height:"100%", "z-index":"9999999"}), jQuery(".overlay").show(), jQuery(".importer_result").show(), jQuery(".importer_result .result").append(e), jQuery(".importer_result .result").show(), s.remove()}}), !1}), e(".importer_result span").click(function(){e(".result").hide(), e(".importer_result").hide(), e(".overlay").hide(), e("#import-settings").removeClass("is_disabled")})}), jQuery(document).ready(function(e){function t(e){var t = ["Bytes", "KB", "MB", "GB", "TB"]; if (0 == e)return"0 Bytes"; var a = parseInt(Math.floor(Math.log(e) / Math.log(1024))); return Math.round(e / Math.pow(1024, a), 2) + " " + t[a]}e("#language_upload").on("click", function(){var t = e("div#vp_extra_code"); e(t).empty(); var a = "action=shineblog_language_popup"; return jQuery.ajax({type:"post", url:ajaxurl, data:a, beforeSend:function(){e(t).html('<div class="preloader"></div>'), e(t).fadeIn("slow")}, success:function(a){e(t).empty(), e(t).html(a)}}), !1}), e("#vp_extra_code a.close").live("click", function(){e("div#vp_extra_code").fadeOut("slow"), e("div#vp_extra_code").empty(), e("div#vp_extra_code").fadeOut("slow")}), e("#vp_extra_code a.start").live("click", function(){var a = e(this); e(a).addClass("disable"); var r = e("div#vp_extra_code"), s = e("#vp_extra_code input#langfile"), n = e(s).val(), i = e(r).find("div.popup p"); if ("" === n)e(i).empty(), e(i).html(select_file), e(a).removeClass("disable"); else{var o = new FormData; if (jQuery.each(e(s)[0].files, function(e, t){o.append("langfile", t)}), o.append("action", "shineblog_process_lang_file_upload"), window.File && window.FileReader && window.FileList && window.Blob){var l = jQuery(s)[0].files[0].size, p = jQuery(s)[0].files[0].name, d = p.substr(p.lastIndexOf(".") + 1); switch (d){case"mo":break; default:return jQuery(i).html(p + " " + lang_unsport), e(a).removeClass("disable"), !1}if (l > 1048576)return jQuery(i).html(t(l) + " " + lang_max_file_size), e(a).removeClass("disable"), !1}jQuery.ajax({type:"POST", url:ajaxurl, data:o, cache:!1, contentType:!1, processData:!1, dataType:"json", beforeSend:function(){e(r).append('<div class="preloader"></div>')}, success:function(t){e(a).removeClass("disable"), e(r).find("div.preloader").fadeOut("slow"), e(i).html(t.msg), e('select[name="sh_localize"]').select2("destroy"), e('select[name="sh_localize"]').empty(), e('select[name="sh_localize"]').append(t.lang), e('select[name="sh_localize"]').select2()}})}}), e("a#del_lang").on("click", function(t){t.preventDefault(); var a = e("div#vp_extra_code"); e(a).empty(); var r = e('select[name="sh_localize"]').val(), s = "lang_file=" + r + "&action=shineblog_language_del"; "" !== r?confirm(confirm_msg) && jQuery.ajax({type:"post", url:ajaxurl, data:s, beforeSend:function(){e(a).html('<div class="preloader"></div>'), e(a).fadeIn("slow")}, success:function(t){alert(del_lang_file), e(a).empty(), e(a).fadeOut("slow"), e('select[name="sh_localize"]').select2("destroy"), e('select[name="sh_localize"]').empty(), e('select[name="sh_localize"]').append(t.lang), e('select[name="sh_localize"]').select2()}}):alert(no_lang_file)})});
