function sh_timepicker(){jQuery(".vp-timepicker").timepicker({timeFormat:"HH:mm:ss"})}!function(t){function i(i){i.each(function(){if (t(this).parents(".tocopy").length <= 0){vp.init_controls(t(this)); var i = t(this).attr("id"), e = (t(this).attr("id"), t(this).attr("data-vp-validation")), n = t(this).attr("data-vp-bind"), o = t(this).attr("data-vp-items-bind"), s = t(this).attr("data-vp-dependency"), a = t(this).getDatas().type; e && p.push({name:i, rules:e, type:a}), "undefined" != typeof n && n !== !1 && n && r.push({bind:n, type:a, source:i}), "undefined" != typeof o && o !== !1 && o && d.push({bind:o, type:a, source:i}), "undefined" != typeof s && s !== !1 && s && l.push({dep:s, type:"field", source:i})}})}function e(i){i.each(function(){if (t(this).parents(".tocopy").length <= 0 && !t(this).hasClass(".tocopy")){var i = t(this).attr("data-vp-dependency"), e = (t(this).getDatas().type, t(this).attr("id")); "undefined" != typeof i && i !== !1 && i && l.push({dep:i, type:"section", source:e})}})}function n(){var i = []; t(".wpa_loop.vp-sortable").sortable({items:">.wpa_group", handle:".vp-wpa-group-heading", axis:"y", opacity:.5, tolerance:"pointer", start:function(e, n){"undefined" != typeof window.KIA_metabox && (i = [], vp.tinyMCE_save(), t(n.item).find(".customEditor textarea").each(function(){if (t(this).parents(".tocopy").length <= 0){try{tinyMCE.execCommand("mceRemoveControl", !1, this.id)} catch (e){}i.push(vp.jqid(this.id))}}))}, stop:function(e, n){if ("undefined" != typeof window.KIA_metabox){for (var o = i.length - 1; o >= 0; o--){var s = t(i[o]); s.val(switchEditors.wpautop(s.val()))}i = i.join(", "); try{KIA_metabox.runTinyMCE(t(i)), vp.tinyMCE_save(); for (var o = i.length - 1; o >= 0; o--){var s = t(i[o]); s.val(switchEditors.pre_wpautop(s.val()))}} catch (a){}}}})}function o(t){for (var i = 0; i < t.length; i++){var e = t[i], n = e.bind.split("|"), o = n[0], s = n[1], a = [], p = ""; p = e.source.replace("[]", ""), p = p.substring(0, p.lastIndexOf("[")), s = s.split(/[\s,]+/); for (var r = 0; r < s.length; r++)s[r] = p + "[" + s[r] + "]", a.push(s[r]); for (r = 0; r < a.length; r++)vp.binding_event(a, r, e, o, ".vp-metabox", "metabox")}}function s(t){for (var i = 0; i < t.length; i++){var e = t[i], n = e.bind.split("|"), o = n[0], s = n[1], a = [], p = ""; p = e.source.replace("[]", ""), p = p.substring(0, p.lastIndexOf("[")), s = s.split(/[\s,]+/); for (var r = 0; r < s.length; r++)s[r] = p + "[" + s[r] + "]", a.push(s[r]); for (r = 0; r < a.length; r++)vp.items_binding_event(a, r, e, o, ".vp-metabox", "metabox")}}function a(t){for (var i = 0; i < t.length; i++){var e = t[i], n = e.dep.split("|"), o = n[0], s = n[1], a = [], p = ""; if ("field" === e.type)p = e.source.replace("[]", ""), p = p.substring(0, p.lastIndexOf("[")); else if ("section" === e.type){var r = jQuery(vp.jqid(e.source)); r.parents(".wpa_group").length > 0?p = jQuery(vp.jqid(e.source)).parents(".wpa_group").first().attr("id"):(p = jQuery(vp.jqid(e.source)).parents(".postbox").attr("id"), p = p.substring(0, p.lastIndexOf("_")))}s = s.split(","); for (var d = 0; d < s.length; d++)s[d] = p + "[" + s[d] + "]", a.push(s[d]); for (d = 0; d < a.length; d++)vp.dependency_event(a, d, e, o, ".vp-metabox")}}var p = [], r = [], d = [], l = []; t(document).on("click", ".vp-wpa-group-title", function(i){i.preventDefault(); var e = t(this).parents(".wpa_group:first"), n = e.find(".vp-controls:first"), o = e.siblings(".wpa_group:not(.tocopy)"), s = t("html, body"); return n.hasClass("vp-hide")?o.exists()?o.each(function(i, a){t(this).find(".vp-controls").first().slideUp("fast", function(){t(this).addClass("vp-hide").slideDown(0, function(){i == o.length - 1 && s.animate({scrollTop:e.offset().top - t("#wpadminbar").height()}).promise().done(function(){n.slideUp(0, function(){t(this).removeClass("vp-hide").slideDown("fast")})})})})}):s.animate({scrollTop:e.offset().top - t("#wpadminbar").height()}).promise().done(function(){n.slideUp(0, function(){t(this).removeClass("vp-hide").slideDown("fast")})}):n.slideUp("fast", function(){t(this).addClass("vp-hide").slideDown(0)}), !1}), t(document).ready(function(){i(jQuery(".vp-metabox .vp-field")), e(jQuery(".vp-metabox .vp-meta-group")), o(r), s(d), a(l), n()}), t("#post").on("submit", function(i){var e = t("input[type=submit][clicked=true]"), n = e.val(), o = 0; if (vp.tinyMCE_save(), t(".vp-field").removeClass("vp-error"), t(".validation-msg.vp-error").remove(), t(".vp-metabox-error").remove(), o = vp.fields_validation_loop(p), o > 0){$notif = t('<span class="vp-metabox-error vp-js-tipsy" original-title="' + o + ' error(s) found in metabox"></span>'), "Save Draft" === n?(t("#minor-publishing-actions .spinner, #minor-publishing-actions .ajax-loading").hide(), $notif.tipsy(), $notif.insertAfter("#minor-publishing-actions .spinner, #minor-publishing-actions .ajax-loading"), t("#save-post").prop("disabled", !1).removeClass("button-disabled")):("Publish" === n || "Update" === n) && (t("#publishing-action .spinner, #publishing-action .ajax-loading").hide(), $notif.tipsy(), $notif.insertAfter("#publishing-action .spinner, #publishing-action .ajax-loading"), t("#publish").prop("disabled", !1).removeClass("button-primary-disabled")); var s = Math.ceil((e.outerHeight() - $notif.height()) / 2); return s > 0 && $notif.css("margin-top", s), void i.preventDefault()}t(this).find(".vp-toggle .vp-input").each(function(){var i = t("<input>", {type:"hidden", name:this.name, value:0}); t(this).before(i)})}), t("#post input[type=submit]").click(function(){t("input[type=submit]", t(this).parents("form")).removeAttr("clicked"), t(this).attr("clicked", "true")}), t.wpalchemy.on("wpa_copy", function(t, n){r = [], l = [], d = [], n.find('input[class="tocopy-hidden"]').first().remove(), i(n.find(".vp-field")), e(n.find(".vp-meta-group")), n.find(".vp-wpa-group-title:first").click(), o(r), s(d), a(l)})}(jQuery);
