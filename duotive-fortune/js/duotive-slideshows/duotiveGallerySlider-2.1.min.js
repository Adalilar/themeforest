/*!
 *
 * jQuery Duotive Gallery Slider v2.1.5
 * http://duotive.org
 *
 * Copyright 2011, Duotive
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 * Date: Sat October 29th 19:57 GMT+2 2011
 *
 */

(function(a){a.fn.dtGallerySlider=function(c){var e={height:500,autoAdvance:true,autoAdvDuration:800,autoAdvInterval:8000,autoAdvPauseOnHover:true,showArrows:true,autoHideArrows:true,showTimer:true,showScroll:true,keyboardControl:true,showDescription:true};c=a.extend(e,c);function b(g){var f;f=parseInt(g.css("padding-left"),10)+parseInt(g.css("padding-right"),10);f+=parseInt(g.css("margin-left"),10)+parseInt(g.css("margin-right"),10);f+=parseInt(g.css("border-left-width"),10)+parseInt(g.css("border-right-width"),10);return f}function d(g){var f;f=parseInt(g.css("padding-top"),10)+parseInt(g.css("padding-bottom"),10);f+=parseInt(g.css("margin-top"),10)+parseInt(g.css("margin-bottom"),10);f+=parseInt(g.css("border-top-width"),10)+parseInt(g.css("border-bottom-width"),10);return f}return this.each(function(){var B=a(this),x=0,p=x,q=0,y=B.find(".slider-images"),h=B.find(".slider-images .mainparent"),l=0,L=B.find(".slider-images .mainlevel"),u=parseInt(L.css("width"),10),k="",w='<div class="slider-controls"><a class="slider-control-left" href="javascript: void(0)">left</a><a class="slider-control-right" href="javascript: void(0)">right</a>',v="",z="",I='<div class="slider-timer"><div class="timer"></div></div>',o=c.autoAdvInterval,i='<div class="slider-scroll"><a class="slider-scroll-left" title="scroll left" href="javascript: void(0);">scroll left</a><div class="slider-scroll-bar"></div><a class="slider-scroll-right" title="scroll right" href="javascript: void(0);">scroll right</a></div>',t="",A="",D="",j="",s="100%",C=B.find(".mainparent .description");B.addClass("dt_galleryslider");function H(){var M=c.height;if(c.showScroll===true){M+=37}y.css("height",c.height);B.stop().animate({height:M},c.autoAdvDuration,"");h.css({width:L.size()*u,height:c.height})}function n(Q,O,R){var M=0,P=parseInt(B.css("width"),10),N=parseInt(h.css("width"),10);l=N-P;k=L.size()-Math.ceil(P/u);if(k<0){k=0}if(Q===undefined){Q=0}if(Q>L.size()-Math.floor(P/u)){Q=0}if(Q<0){Q=L.size()-Math.floor(P/u)}M=Q*u;if(M<0){M=0}if(M>l){M=l}if(N<=P){M=-(P-N)/2}h.stop().animate({left:-M},R,"swing");if(c.showTimer===true&&c.autoAdvance===true){J(c.autoAdvInterval)}if(c.showScroll===true){G();D.slider("value",Q*100/k)}O=Q;Q++;p=O;x=Q}function g(M){q=setInterval(function(){n(x,p,c.autoAdvDuration)},M)}function E(){clearInterval(q);g(c.autoAdvInterval)}function f(){B.append(w);w=B.find(".slider-controls");v=w.find(".slider-control-left");z=w.find(".slider-control-right");z.click(function(){n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}if(c.keyboardControl===true&&c.helpBox===true){animHelpBox("close",c.autoAdvDuration/2)}});v.click(function(){x=x-2;n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}if(c.keyboardControl===true&&c.helpBox===true){animHelpBox("close",c.autoAdvDuration/2)}})}function m(M,N){if(M===undefined){M="show"}switch(M){case"show":a(".slider-control-left").stop().animate({left:30},N,"");a(".slider-control-right").stop().animate({right:30},N,"");break;case"hide":a(".slider-control-left").stop().animate({left:-60},N,"");a(".slider-control-right").stop().animate({right:-60},N,"");break}}function r(){B.append(I);I=B.find(".slider-timer .timer")}function J(N,M){if(M===undefined){M="reset"}switch(M){case"reset":I.css({width:"0%"});I.stop().animate({width:"100%"},N,"linear");break;case"pause":I.stop();N=((c.timerWidth-parseInt(I.css("width"),10))*N)/c.timerWidth;o=N;break;case"resume":N=((c.timerWidth-parseInt(I.css("width"),10))*N)/c.timerWidth;o=N;I.stop().animate({width:"100%"},N,"linear");break}}function K(){B.append(i);i=B.find(".slider-scroll");t=i.find(".slider-scroll-left");D=i.find(".slider-scroll-bar").wrap('<div class="scroll-bar-parent"></div>');A=i.find(".slider-scroll-right");D.slider({animate:"slow",start:function(M,N){if(c.autoAdvance===true){clearInterval(q);if(c.showTimer===true){J(c.autoAdvInterval,"pause")}}},slide:function(M,N){h.stop().animate({left:-Math.floor(N.value*l/100)},500)},stop:function(N,O){if(c.autoAdvance===true){E();if(c.showTimer===true){J(c.autoAdvInterval,"reset")}}var P=Math.round(O.value*k/100),M=P*u;if(P===k){M=l}h.stop().animate({left:-M},c.autoAdvDuration,"");x=P+1}});j=D.find(".ui-slider-handle");j.wrap('<div class="handle-parent"></div>').mousedown(function(){D.css("width",parseInt(a(this).parent().css("width"),10))}).mouseup(function(){D.css("width",parseInt(D.parent().css("width"),10))}).mouseleave(function(){D.css("width",parseInt(D.parent().css("width"),10))});t.click(function(){if(D.slider("value")!==0){x=x-2;n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}}});A.click(function(){if(D.slider("value")!==100){n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}}});if(c.showArrows===true){v.addClass("moveup");z.addClass("moveup")}}function G(){var M=parseInt(D.parent().css("width"),10);s=Math.floor(parseInt(D.parent().css("width"),10)/k);if(k===0){s=100*M/100}j.stop().animate({width:s,"margin-left":-s/2},c.autoAdvDuration*2,"");j.parent().css({width:M-s})}function F(){var M=C.height();C.css({top:M,display:"block"});L.find("li").hover(function(){if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){clearInterval(q);if(c.showTimer===true){J(c.autoAdvInterval,"pause")}}a(this).find(".description").css("top",M);a(this).find(".description").stop().animate({top:0},c.autoAdvDuration/2,"")},function(){if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){E();if(c.showTimer===true){J(c.autoAdvInterval,"reset")}}a(this).find(".description").stop().animate({top:-M},c.autoAdvDuration/2,"")})}if(L.size()>0){H();if(c.showArrows===true){f();if(c.autoHideArrows===true){m("hide",c.autoAdvDuration*2)}}if(c.showScroll===true){K()}if(c.autoAdvance===true&&c.showTimer===true){r()}n(x,p,c.autoAdvDuration);if(c.showDescription===true){F()}if(c.autoAdvance===true){g(c.autoAdvInterval)}B.mouseenter(function(){if(c.showArrows===true&&c.autoHideArrows===true){m("show",c.autoAdvDuration/2)}if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){clearInterval(q);if(c.showTimer===true){J(c.autoAdvInterval,"pause")}}});B.mouseleave(function(){if(c.showArrows===true&&c.autoHideArrows===true){m("hide",c.autoAdvDuration/2)}if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){E();if(c.showTimer===true){J(c.autoAdvInterval,"reset")}}});if(c.keyboardControl===true){a(document).keydown(function(M){if(M.keyCode===39){n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}}if(M.keyCode===37){x=x-2;n(x,p,c.autoAdvDuration);if(c.autoAdvance===true){E()}}})}}})}}(jQuery));