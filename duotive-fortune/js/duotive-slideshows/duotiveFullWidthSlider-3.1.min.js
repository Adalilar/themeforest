/*!
 *
 * jQuery Duotive Full Width Slider v3.1
 * http://duotive.org
 *
 * Copyright 2011, Duotive
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 * Date: Mon October 24th 13:39 GMT+2 2011
 *
 */

(function(a){a.fn.dtFullWidthSlider=function(c){var e={height:500,autoAdvance:true,autoAdvDuration:800,autoAdvInterval:8000,autoAdvPauseOnHover:true,showArrows:true,keyboardControl:true,autoHideArrows:true,showGallery:true,autoHideGallery:true,showTitles:true,titlesAlign:"center",showDescription:true,descBoxWidth:560,descBoxHeight:160,showTimer:true,showIcon:false,helpBox:true,helpBoxText:"Press the left and right keys on your keyboard to browse through the images."};c=a.extend(e,c);function b(g){var f;f=parseInt(g.css("padding-left"),10)+parseInt(g.css("padding-right"),10);f+=parseInt(g.css("margin-left"),10)+parseInt(g.css("margin-right"),10);f+=parseInt(g.css("border-left-width"),10)+parseInt(g.css("border-right-width"),10);return f}function d(g){var f;f=parseInt(g.css("padding-top"),10)+parseInt(g.css("padding-bottom"),10);f+=parseInt(g.css("margin-top"),10)+parseInt(g.css("margin-bottom"),10);f+=parseInt(g.css("border-top-width"),10)+parseInt(g.css("border-bottom-width"),10);return f}return this.each(function(){var n=a(this),l=0,U=l,V=0,v=n.find(".slider-images"),E=v.find("li"),D='<div class="slider-controls"><a class="slider-control-left" href="javascript: void(0)">left</a><a class="slider-control-right" href="javascript: void(0)">right</a>',t=n.find(".slider-gallery"),g=t.find("ul"),m=t.find("li"),r=parseInt(m.css("width"),10)+b(m),S=parseInt(t.css("height"),10)+d(t),x='<div class="slider-titles"><div class="titles-mask"><ul></ul></div></div>',A="",F="",s='<div class="slider-overlay"></div>',W=n.find(".slider-descriptions"),Q=W.find("li"),o='<a class="slider-desc-close" href="javascript: void(0)">Close</a>',K='<div class="slider-timer"><div class="timer"></div></div>',Y=c.autoAdvInterval,M='<div class="slider-helpbox"><p>'+c.helpBoxText+"</p></div>";n.addClass("dt_fullwidthslider");function R(){var ac=[],ab,Z,aa;for(ab=0,Z=E.length;ab<Z;ab++){aa=E.eq(ab).find("img");ac[ab]=aa.attr("src");aa.parent().css({background:"url("+ac[ab]+") no-repeat center top",height:c.height}).end().remove()}n.css("height",c.height);v.css("height",c.height);v.find("ul").css({height:c.height,overflow:"hidden"});E.css({height:c.height,opacity:0})}function P(){var aa,Z;n.append(x);x=n.find(".slider-titles");A=x.find("ul");for(aa=0,Z=E.length;aa<Z;aa++){A.append('<li><a href="javascript: void(0)">'+E.eq(aa).find("a").attr("title")+"</a></li>")}F=x.find("li a");for(aa=0,Z=F.length;aa<Z;aa++){F.eq(aa).attr("rel",aa).click(function(){l=parseInt(a(this).attr("rel"),10);i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}})}if(c.titlesAlign==="center"||c.titlesAlign==="left"||c.titlesAlign==="right"){F.css("text-align",c.titlesAlign)}}function h(aa,Z){var ab={"font-size":"16px",opacity:"0.5",filter:"alpha(opacity=50)",height:"20px","line-height":"20px"},ac={"font-size":"32px",opacity:"1",filter:"alpha(opacity=100)",height:"56px","line-height":"56px"},k=aa*20-20;if(aa===0||aa===1){k=0}if(aa===E.size()-1){k=(aa-1)*20-20}F.eq(Z).stop().animate(ab,c.autoAdvDuration/1.5,"");F.eq(aa).stop().animate(ac,c.autoAdvDuration/1.5,"");A.stop().animate({top:-k},c.autoAdvDuration/1.5,"swing")}function f(Z,aa){var k=0;if(Z===undefined){Z="down"}switch(Z){case"up":k=S+20;break;case"down":k=-5;break}x.stop().animate({bottom:k},aa,"")}if(c.showGallery===true){g.css({width:m.size()*r});m.last().css({"margin-right":0});for(var T=0,C=m.length;T<C;T++){m.eq(T).find("a").attr("rel",T).click(function(){l=parseInt(a(this).attr("rel"),10);i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}})}}function z(Z){var k=0,ab=8,aa=Math.ceil(parseInt(t.css("width"))/r);if(Z==0){k=Z*r}else{k=(Z-1)*r}if(k>=(E.size()*r)-(ab*r)){k=(E.size()*r)-(ab*r)}g.stop().animate({left:-k},c.autoAdvDuration,"")}function H(Z,k){m.eq(k).find("a").removeClass("active");m.eq(Z).find("a").addClass("active")}function w(k,Z){if(k===undefined){k="show"}switch(k){case"show":t.stop().animate({bottom:0},Z,"");break;case"hide":t.stop().animate({bottom:-S},Z,"");break}}function B(){n.append(K);K=n.find(".slider-timer .timer")}function O(Z,k){if(k===undefined){k="reset"}switch(k){case"reset":K.css({width:"0%"});K.stop().animate({width:"100%"},Z,"linear");break;case"pause":K.stop();Z=((c.timerWidth-parseInt(K.css("width"),10))*Z)/c.timerWidth;Y=Z;break;case"resume":Z=((c.timerWidth-parseInt(K.css("width"),10))*Z)/c.timerWidth;Y=Z;K.stop().animate({width:"100%"},Z,"linear");break}}function L(){n.append(s);s=n.find(".slider-overlay");s.css("opacity",0);W.css({width:c.descBoxWidth-40,height:c.descBoxHeight-40,"margin-left":-(c.descBoxWidth/2),"margin-top":-(c.descBoxHeight/2),top:"-"+50*c.height/100+"%"});W.append(o);o=W.find(".slider-desc-close");Q.css("opacity",0)}function y(Z,ab){var aa=0,k=0,ac=1;if(Z===undefined){Z="show"}if(Z==="show"){aa=c.height,k=50*c.height/100,ac=1}else{aa=0,k=0,ac=0}s.stop().animate({height:aa,"margin-top":-k,opacity:ac},ab,"")}function u(Z,aa){var k=0;if(Z===undefined){Z="show"}if(Z==="show"){k="50%"}else{k="-"+50*c.height/100+"%"}W.stop().animate({top:k},c.autoAdvDuration,"swing")}function q(Z,k){Q.eq(k).stop().animate({opacity:0},c.autoAdvDuration/2,"");Q.eq(Z).stop().animate({opacity:1},c.autoAdvDuration/2,"")}function i(Z,k,aa){if(Z===undefined||Z>E.length-1){Z=0}if(Z<0){Z=E.length-1}E.eq(k).stop().animate({opacity:0,"z-index":10},aa,"",function(){});E.eq(Z).stop().animate({opacity:1,"z-index":20},aa,"",function(){});if(c.showTimer===true&&c.autoAdvance===true){O(c.autoAdvInterval)}if(c.showDescription===true){q(Z,k)}if(c.showGallery===true){z(Z);H(Z,k)}if(c.showTitles===true){h(Z,k)}k=Z;Z++;U=k;l=Z}function X(k){V=setInterval(function(){i(l,U,c.autoAdvDuration)},k)}function G(){clearInterval(V);X(c.autoAdvInterval)}function I(k,Z){if(k===undefined){k="show"}switch(k){case"show":a(".slider-control-left").stop().animate({left:30},Z,"");a(".slider-control-right").stop().animate({right:30},Z,"");break;case"hide":a(".slider-control-left").stop().animate({left:-60},Z,"");a(".slider-control-right").stop().animate({right:-60},Z,"");break}}if(c.showArrows===true){v.after(D);D=n.find(".slider-controls");var p=D.find(".slider-control-left");var J=D.find(".slider-control-right");if(c.autoHideArrows===true){I("hide",c.autoAdvDuration*2)}J.click(function(){i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}});p.click(function(){l=l-2;i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}})}if(c.keyboardControl===true){a(document).keydown(function(k){if(k.keyCode===39){i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}}if(k.keyCode===37){l=l-2;i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){G()}}})}function N(){var k=c.height;if(c.showGallery===true){k-=S}if(c.showTitles===true){k-=parseInt(x.css("height"),10)+d(x)}k=k/2;if(n.find(".icon").size()>0){c.showIcon=true;n.find(".icon").css({opacity:0,top:k})}if(c.showIcon===true){E.mouseenter(function(){a(this).find(".icon").stop().animate({opacity:1},c.autoAdvDuration/2,"")});E.mouseleave(function(){a(this).find(".icon").stop().animate({opacity:0},c.autoAdvDuration/2,"")})}}function j(Z,aa){var k=0;if(Z===undefined){Z="show"}if(Z==="show"){k="50%"}else{k="-"+50*c.height/100+"%"}M.stop().animate({top:k},aa,"swing")}if(c.keyboardControl===true&&c.helpBox===true){n.append(M);M=n.find(".slider-helpbox");M.append('<span class="fullwidth-slider-keys"></span>');M.append('<a class="slider-helpbox-close" href="javascript: void(0)"></a>');helpboxCloseBtn=M.find(".slider-helpbox-close");j("show",c.autoAdvDuration/2);helpboxCloseBtn.click(function(){j("close",c.autoAdvDuration/2)})}n.mouseenter(function(){if(c.showGallery===true&&c.autoHideGallery===true){w("show",c.autoAdvDuration/2)}if(c.showArrows===true&&c.autoHideArrows===true){I("show",c.autoAdvDuration/2)}if(c.showTitles===true&&c.showGallery===true&&c.autoHideGallery===true){f("up",c.autoAdvDuration/2)}if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){clearInterval(V);if(c.showTimer===true){O(c.autoAdvInterval,"pause")}}});n.mouseleave(function(){if(c.showGallery===true&&c.autoHideGallery===true){w("hide",c.autoAdvDuration/2)}if(c.showArrows===true&&c.autoHideArrows===true){I("hide",c.autoAdvDuration/2)}if(c.showTitles===true&&c.showGallery===true&&c.autoHideGallery===true){f("down",c.autoAdvDuration/2)}if(c.autoAdvance===true&&c.autoAdvPauseOnHover===true){if(c.showTimer===true){O(c.autoAdvInterval,"reset")}G()}});if(c.showDescription===true){L();E.find(".icon.content").click(function(){if(c.autoAdvance===true){clearInterval(V)}if(c.showTimer===true){O(c.autoAdvInterval,"pause")}y("show",c.autoAdvDuration/2);u("show",c.autoAdvDuration/2)});s.click(function(){if(c.autoAdvance===true){G()}if(c.showTimer===true){O(c.autoAdvInterval,"reset")}y("hide",c.autoAdvDuration/2);u("hide",c.autoAdvDuration/2)});o.click(function(){if(c.autoAdvance===true){G()}if(c.showTimer===true){O(c.autoAdvInterval,"reset")}y("hide",c.autoAdvDuration/2);u("hide",c.autoAdvDuration/2)})}if(c.autoAdvance===true){a(window).blur(function(){clearInterval(V);if(c.showTimer===true){O(c.autoAdvInterval,"pause")}});a(window).focus(function(){G();if(c.showTimer===true){O(c.autoAdvInterval)}})}R();if(c.showTitles===true){P()}if(c.showTimer===true){B()}i(l,U,c.autoAdvDuration);if(c.autoAdvance===true){X(c.autoAdvInterval)}if(c.showGallery===true&&c.autoHideGallery===true&&c.showTitles===true){f("down",c.autoAdvDuration*2)}else{if(c.showGallery!=true&&c.showTitles===true){f("down",c.autoAdvDuration*2)}}if(c.showGallery===true&&c.autoHideGallery===true){w("hide",c.autoAdvDuration*2)}N()})}}(jQuery));