jQuery(function(c){a();c(".tl-color-picker").wpColorPicker();function a(){var d=null;var e=function(g,f){TL_AdminLib.do_admin_ajax({id:g.id,sub_action:"load_thumbnail_image",size:"layers-landscape-medium"},"json",function(h){if(h.success==true){d=h.data;c('<div class="image" style="background-image: url('+h.data.url+');"><a data-attachment-id="'+h.data.id+'" class="remove"><i class="icon-ti-close"></i></a></span></div>').insertAfter(f);c("#meta-image-button").hide()}else{alert("Error!, Unable to load an image!")}})};b(e);if(c("#tl_item_header_image_id").val()!=""){c("#meta-image-button").hide()}}function b(e){var d;if(c("#item_header_image_id").val()!=""&&typeof c("#item_header_image_id").val()!="undefined"){c("#meta-image-button").hide()}c("#meta-image-button").click(function(g){var f=c(this);g.preventDefault();if(d){d.open();return}d=wp.media.frames.meta_image_frame=wp.media({title:"Select an image for page header",button:{text:"Submit"},library:{type:"image"}});d.on("select",function(){var h=d.state().get("selection").first().toJSON();c("#tl_item_header_image_id").val(h.id);e(h,f)});d.open()});c("body").on("click",".tl-control .image .remove",function(g){var f=c(this);f.parent().remove();c("#tl_item_header_image_id").val("");c("#meta-image-button").show()})}}(jQuery));